import type { TsConfigResult } from "get-tsconfig";
import kleur from "kleur";

export const validateTsconfigJSX = (tsconfig: TsConfigResult | null) => {
  if (!tsconfig) {
    console.log(
      kleur.red(
        "ğŸš¨ tsconfig íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. seed-iconì€ typescript í”„ë¡œì íŠ¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. javascriptë¥¼ ê³„ì†í•´ì„œ ì‚¬ìš©í•˜ê³  ì‹¶ìœ¼ì‹œë‹¤ë©´ generateë˜ëŠ” íŒŒì¼ì„ ì§ì ‘ ìˆ˜ì •í•´ì£¼ì„¸ìš”.",
      ),
    );
    console.log(
      kleur.red(
        "ğŸš¨ The tsconfig file was not found, the seed-icon was written based on the typescript project. If you want to continue using javascript, please modify the file that is generated by yourself.",
      ),
    );
    return;
  }

  const jsx = tsconfig.config.compilerOptions?.jsx;

  if (jsx === undefined || jsx === "preserve" || jsx === "react-native" || jsx === "react-jsxdev") {
    console.log(
      kleur.red(
        "ğŸš¨ tsconfig íŒŒì¼ì— jsx ì˜µì…˜ì´ ì œëŒ€ë¡œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤. `seed-icon`ì€ JSXë¥¼ ì˜ì¡´í•©ë‹ˆë‹¤. tsconfig.jsonì— `jsx` í•„ë“œë¥¼ `react` ë˜ëŠ” `react-jsx`ë¡œ ì„¤ì •í•´ì£¼ì„¸ìš”.",
      ),
    );
    console.log(
      kleur.red(
        "ğŸš¨ The jsx option is not set in the tsconfig file. The `seed-icon` depends on JSX, please set the `jsx` field in tsconfig.json to `react` or `react-jsx`.",
      ),
    );
    return;
  }
};
